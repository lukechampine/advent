package main

import (
	"github.com/lukechampine/advent/utils"
)

const input = `ivyhczwokexltwhsfamqprbnuy
ivjhcjdokexltwwsfamqpabnuy
ivjhczdokebltwgsfydqprbnuy
ivjhcadokexftogsfamqprbnuy
idjhczdokexltwgsfacqprbnuh
ivjhgzookexltwgsfamqjrbnuy
uvjhctdokexltwosfamqprbnuy
ivrhczdokexltwhzfamqprbnuy
ivjhczuxkexltwgsfamqprbney
ivjhczdokemltwgsfadnprbnuy
ifjhczdokexltwgsfamqprbkuf
ivjhkzdokltltwgsfamqprbnuy
ivjuczdhkexltwgsfamqprtnuy
ivjhjzdxkexltwgsfapqprbnuy
ivlhczdoxexltwgsfamqprgnuy
ivjhczdoknxltwgssamqsrbnuy
ivjhczdokexltwgswadqprbruy
ivjhczdokexthwgsfampprbnuy
uvjhczrozexltwgsfamqprbnuy
ivolczdokexltwgsffmqprbnuy
ivjhczibkexltwgsfamoprbnuy
ivjhczdokefltmgsfamqprbouy
ivjhczdobexltngsfamsprbnuy
ivjhczdokexltwvsfxqqprbnuy
dvjhczdokexucwgsfamqprbnuy
kvjhszkokexltwgsfamqprbnuy
ivjhczdokexrtegsfamqprbnus
ivjhctdokexltwglgamqprbnuy
ivjhczdozexutwgsfamqdrbnuy
ivjhczqokemltwgsfakqprbnuy
uvjhczdokexlqwgsfadqprbnuy
ivjhczdohexltwglffmqprbnuy
izjhczdokexltwgsfamqprbsqy
iajhczdokwxltwgjfamqprbnuy
ivjfczdokexllwgslamqprbnuy
ivjhczdoyexltwgsfamqdrbnxy
ivjhczdokekwtwssfamqprbnuy
ivjhcodokexltwgsfamqirxnuy
ihjhhzdokexltwgsfamqlrbnuy
ivjdpzdokexltwfsfamqprbnuy
ivjhcpdokexltwgsfamqqrbruy
qvjhcziokexltwgsfamqprbnny
ivohczdomexltwgsfkmqprbnuy
ivjhczhokhxlywgsfamqprbnuy
ivjhczdokexltwgmffmqprbruy
ivjhczdokqxltwgcfamqprbnyy
ivjhczdokepltwgsfamcprbnay
ivjhczdokexltwgseamqpmbnua
ivjzczdokexltwgszamqplbnuy
ivjhczpokexltwgvfgmqprbnuy
idjhczdokexltwgsxamqprbndy
ivjhczdxkexltwgcgamqprbnuy
ivjhczdckexatpgsfamqprbnuy
ivjrczdorexltwgsfamqprbnvy
ivjoczdokexltwgswamqprbtuy
iylhczdokexltwgsfamqpxbnuy
imxhczdokkxltwgsfamqprbnuy
ivvhczdoktxltwgsfamaprbnuy
ivyhczdokexltwhsfayqprbnuy
ivjhcrdokexltegsfamqprbnum
rvjhezdokexltwgsoamqprbnuy
ivjzczdokexlbwgsfkmqprbnuy
ivjhczdokelltwgsyamqprbnoy
ixjhczdorexltwgsfamqprbuuy
ivjhczpokexdtwglfamqprbnuy
ivjhczdokexltwgfgamcprbnuy
ikjhczdokexltwgsfamqirbnux
ivjhczdopjxltwgsfamqprbnny
ivchczdokexltwgniamqprbnuy
ivjhczdooeqltwgsfamqprbniy
ivjhcldonexltwgbfamqprbnuy
ixjhczdokehltwgsfamqprbnuf
ivjhczdckefltwgsfamqppbnuy
ivjhczdoqrxltwgsfamqprbnun
ivjhczdokcxltwgmfarqprbnuy
ivjhcziorexltqgsfamqprbnuy
ivjhwzdokexltwgnfamqprbcuy
ivjhczdoqexltwgsfazqprunuy
iijhczdokexltwgsyamqprbnug
ivjhczdokexltwgxfamhprbnry
ivjhczdakexltwgsfaeqlrbnuy
ivjhqzdokehltwgsfampprbnuy
ivjhczdokexltwlsfpmyprbnuy
ivjhfzdoktxltwgsfamzprbnuy
ivlhvzdokexltwgsvamqprbnuy
ivjhczdbkexltwgsaamqprfnuy
ivahcedokexltigsfamqprbnuy
cvjhczdokexltwgsfamapibnuy
ivjhczkokbxltwgsfbmqprbnuy
pvjuczdnkexltwgsfamqprbnuy
iyjhczdckexotwgsfamqprbnuy
ivjhzzdokvxltwgsfamqprbnuo
ivjhczdobexltwgsxamqprbnry
ivjhczdokexltwgsfaprprbnub
ivjhczdokexltwgofarqprbkuy
ivjhczdokexltwgbfymqprbnhy
ibjhczdokexltwgsfkmqpvbnuy
ivjhczdzkexlywgsfacqprbnuy
hvdhczdokexltwglfamqprbnuy
ivjhczdokexrtwgsfamqprbsuh
ivjhczhokexltngsfamqpjbnuy
ivjhcsjokexltwgsfaeqprbnuy
ivjmczdokexltmgsfamqpbbnuy
wvjhczdokexltwgsfamkpkbnuy
icjhpzdoaexltwgsfamqprbnuy
ivjmczdhkexltwgsfzmqprbnuy
ivjhczdokexytwgsfamqprbwug
ikjhczdjkexljwgsfamqprbnuy
ivjvcdmokexltwgsfamqprbnuy
ivjhazdorixltwgsfamqprbnuy
ivchczdokexltwgsfamzprenuy
ivjcczdokexlttgsfamqpmbnuy
ibchgzdokexltwgsfamqprbnuy
ivjhczdokepltwgsfamqpeenuy
ivjnwzdokexlrwgsfamqprbnuy
ivjhczdokexitwgsfadqlrbnuy
icjhcrdokexltwgsfamqkrbnuy
ivngczdokexltwgsfamqprbyuy
ivjhuudokexlvwgsfamqprbnuy
ivjhczdnkexltwgsfhmqpxbnuy
itjhczdokexltwvsfamgprbnuy
ivjhcddokexltwgsfakqprbnny
ivjhuzdojexltwfsfamqprbnuy
idjhczdokexltwgsfamqukbnuy
ivjhczdokexlzigsfamqprbngy
ivjwczdokexltwgufamqprbnuo
iijhczdokexltwfsfadqprbnuy
ivjhczdukexdtwgsfamqpsbnuy
idjhczdokexllwgssamqprbnuy
zvjhczdokexrtwgsfamqplbnuy
ivphczdofexltwgefamqprbnuy
ivhhczdokexlpwgsjamqprbnuy
ivjhczdovexltwgsfamqprhnuj
ivjhczdoklxltwgseamqprlnuy
ivjhcqdokexltngsfamqprdnuy
ivjhczdoifxltagsfamqprbnuy
izjhczdokexltwjsramqprbnuy
psjhczdokexlgwgsfamqprbnuy
ivjhcadokexltwgsfsmqwrbnuy
ivjhczdokexltwgsfawqiibnuy
ivjhczkokexhtwgsfamqprbnuk
ivjhcmdukexltwgsfamvprbnuy
ivjlczdokexltwgsfamquibnuy
ivjhczdokexntwgyfamqprbniy
ivjhczdokexltwlsfafqprbnuc
ivjhczdosexltrtsfamqprbnuy
ivjhcznokexbtwgsfafqprbnuy
ivwtczdotexltwgsfamqprbnuy
ivjhvzdokexltigsoamqprbnuy
ivjhcmdokexltwasfamqirbnuy
ivthczdokexltwgsfaydprbnuy
ivjhwzdskexltwgsfamqprbnus
icjhczdosuxltwgsfamqprbnuy
ivjhczdokexltwgstamqbrmnuy
iejhczuoktxltwgsfamqprbnuy
ivjhczdokeqltwgskamqprbniy
ivjhlzdokexltugsfamqprbpuy
iwjqczdckexltwgsfamqprbnuy
ivjhwzdokexluwgsfxmqprbnuy
ivjhczdokexltwgwfwmqprbguy
gvjhczkokexltwgsfgmqprbnuy
ivjhczdoyexlhwgsfamqprbnoy
cvjhczdokexltwgsfomqprinuy
vvmhczdokexltwgsfamqprbnun
vvjhczdokexltwgsftmfprbnuy
ivkhckdokhxltwgsfamqprbnuy
iyjhczdkkexltjgsfamqprbnuy
ivlhczdokexltwgsfamqyrbhuy
tvjhmzdokexltwgsfamqorbnuy
ivjhczdokexltwvsfamqprbnxi
ivjhczdowexltwgswamqerbnuy
wvjiczdomexltwgsfamqprbnuy
ivjpizdokexltwgvfamqprbnuy
ivjhuzdokexlzwgspamqprbnuy
ivjhczdokeyltwgkfamqprdnuy
jvjhczdokexlnwgsfamqirbnuy
ivjheidokexltwvsfamqprbnuy
mvjhczdokexltwgsfamqyrsnuy
ivjhazdykexltwgsramqprbnuy
ivjkcodokexltwgsxamqprbnuy
ikjhczdoktxltwgpfamqprbnuy
ivjhyzdfkexmtwgsfamqprbnuy
ivohczdokexltugsfamqprynuy
ivjkczdqkexltwgshamqprbnuy
ivjhczdokexltwgskamqynbnuy
icjhczdokexltwgofamrprbnuy
ivjhlzdokealtwgsfamqsrbnuy
ivehczdybexltwgsfamqprbnuy
ovjhczdokexltwgsfamqirbnuo
ivjoczdokexltwgsfamqurbnty
ivjmczdokexltwgsfrmqprnnuy
ivjhczdowpxltwgbfamqprbnuy
ivjhczdokexltwfsfamqkrgnuy
ivjhwzdokexltwgsfavqprbnuq
jvjhczdokexltwgsiamqprbnny
ivjhlzdouexltwfsfamqprbnuy
ivjhczdokexltwgsfamqbrbnlv
iwjhczdokexltwgsfapqprbnqy
idjhczdokexltwgsaamqrrbnuy
ivjhjzdopepltwgsfamqprbnuy
ivjmczdokejltwgsfamqpbbnuy
ivjhczdokexltwgsuamdprvnuy
injhczdokexltwgefamqurbnuy
iujhczdokexltwgsaamqjrbnuy
ivjhczdokexltwgvfaaqprbnly
ivehczdokexltwgsfamqppbnui
ivxhczdodexltwgsfamqplbnuy
ivjhczfokexltwgsfamqpwbauy
ivjhcztwkexhtwgsfamqprbnuy
ivjeczdokexltygsfmmqprbnuy
ivjhchdokexltwgsmameprbnuy
ivkhczdoklxltwggfamqprbnuy
ivjhczdzkexltwhsfamqprjnuy
ivjhcedokeultngsfamqprbnuy
ivjhczdokexvtwgseabqprbnuy
ivjhczdooexltlgsfamqpibnuy
ivjgczvosexltwgsfamqprbnuy
ivlhczwokexltwgsfamqmrbnuy
lvjhczdokexutwgsfamrprbnuy
ivahczdokexpdwgsfamqprbnuy
ivjhcznokexltwhsfamqpnbnuy
ivjhczdpkyxltwgbfamqprbnuy
ivjhnzdokexltwgsftmqprinuy
ivihczdokexltnhsfamqprbnuy
ivjhcbdokevltwgsfamqprbauy
hgjoczdokexltwgsfamqprbnuy
dvjhczdckexltwgsfamqpybnuy
ivjhcadokesltwgsfsmqwrbnuy
ivjhwzdokexlttgsfamqprbney
ivjhcidokexltwgofamqfrbnuy
ivokwzdokexltwgsfamqprbnuy
ivjiczdokexltwgsfaqqarbnuy
ivjhczdokexqtwfsfamgprbnuy
ivjhczdokealtwgsfamqerbnqy
ivjhczdskexltwgsfamqprznuu
ivjhwzdokexltwjsfdmqprbnuy
ivjhczaokexlzwgsfamqprbnus
ivjhczdokexltwosfamqnrbnux
ivjhczdokexlqwgsfamwprcnuy
ivjhczdqkexltwgswamqpcbnuy
ijjhczdokexnttgsfamqprbnuy
ivjhcedckexltwgsfamqprbnpy
ivjhczdokeyltwgsfamqshbnuy
ivjhczdokexltsgsfamqpmznuy
ivjlczdtkeiltwgsfamqprbnuy
ivjhczdokexltwgsfkmtprbnby
ivjhnzdozexltwgsfamqprbnuc
xqjxczdokexltwgsfamqprbnuy
ivjhczdokeyltwgsfamqnrbnuw
ivjwczgokexltwgsfamvprbnuy`

func withinOne(line string, lines []string) (string, bool) {
	for _, cmp := range lines {
		i := utils.DiffIndex(line, cmp)
		// if there's only 1 difference, the rest should be the same
		if i == len(line) || line[i+1:] != cmp[i+1:] {
			continue
		}
		return line[:i] + line[i+1:], true
	}
	return "", false
}

func main() {
	// part 1
	lines := utils.Lines(input)
	var appearTwice, appearThrice int
	for _, line := range lines {
		var twice, thrice bool
		for _, n := range utils.CharCounts(line) {
			twice = twice || n == 2
			thrice = thrice || n == 3
		}
		if twice {
			appearTwice++
		}
		if thrice {
			appearThrice++
		}
	}
	utils.Println(appearTwice * appearThrice)

	// part 2
	for i, line := range lines {
		if rest, ok := withinOne(line, lines[i+1:]); ok {
			utils.Println(rest)
			break
		}
	}
}
